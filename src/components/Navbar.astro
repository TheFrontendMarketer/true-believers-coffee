---
import { Image } from "astro:assets";
import logo from "../assets/tbc-logo-100x100.png";
---

<!-- navbar goes here -->
<nav class="bg-[#371B07]">
  <div class="site-container">
    <div class="flex justify-between items-center">
      <!-- Logo -->
      <div class="py-4">
        <a href="/">
          <Image
            src={logo}
            alt="True Believers Coffee Logo"
            width={100}
            height={100}
            class="image-sharp"
          /></a
        >
      </div>
      <!-- Navigation Items -->
      <ul class="hidden md:flex items-center space-x-4 text-white">
        <li>
          <a
            class="relative py-5 px-3 hover:text-orange-400
             after:content-[''] after:absolute after:left-0 after:-bottom-[-8px]
             after:h-0.5 after:w-0 after:bg-white after:transition-all after:duration-300
             hover:after:w-full"
            href="/store">Store</a
          >
        </li>
        <li>
          <a
            class="relative py-5 px-3 hover:text-orange-400
             after:content-[''] after:absolute after:left-0 after:-bottom-[-8px]
             after:h-0.5 after:w-0 after:bg-white after:transition-all after:duration-300
             hover:after:w-full"
            href="/contact">Contact</a
          >
        </li>
        <li>
          <a
            class="relative py-5 px-3 hover:text-orange-400
             after:content-[''] after:absolute after:left-0 after:-bottom-[-8px]
             after:h-0.5 after:w-0 after:bg-white after:transition-all after:duration-300
             hover:after:w-full"
            href="/about">About</a
          >
        </li>
        <li>
          <a
            class="relative py-5 px-3 hover:text-orange-400
             after:content-[''] after:absolute after:left-0 after:-bottom-[-8px]
             after:h-0.5 after:w-0 after:bg-white after:transition-all after:duration-300
             hover:after:w-full"
            href="/blog">Blog</a
          >
        </li>
      </ul>
      <div>
        <div class="cart-items cart-items__desktop" id="cartCountDesktop">
          0
        </div>
        <a class="relative py-5 px-3 hover:text-orange-400" href="/blog"
          ><img
            src="/images/store/shopping-cart-light-100x100.svg"
            alt="Shopping cart"
            class="w-8 h-8 cursor-pointer"
          /></a
        >
      </div>

      <!-- mobile button goes here -->
      <div class="md:hidden flex items-center">
        <button
          class="mobile-menu-button cursor-pointer"
          aria-label="Toggle mobile menu"
        >
          <img
            class="w-6 h-6 hamburger-icon transition-all duration-300 ease-in-out transform hover:scale-110"
            src="/images/icon-hamburger-light.svg"
            alt="Hamburger menu"
          />
          <img
            class="w-6 h-6 close-icon hidden transition-all duration-300 ease-in-out transform hover:scale-110 hover:rotate-90"
            src="/images/icon-close-light.svg"
            alt="Close menu"
          />
        </button>
      </div>
    </div>
  </div>

  <!-- mobile menu -->
  <ul
    class="mobile-menu hidden md:hidden px-3 transform transition-all duration-500 ease-out scale-95 opacity-0 text-white"
  >
    <li>
      <a
        href="/"
        class="block py-2 px-3 text-sm hover:bg-gray-200 transition-all duration-200 hover:translate-x-2"
        >Home</a
      >
    </li>
    <li>
      <a
        href="/store"
        class="block py-2 px-3 text-sm hover:bg-gray-200 transition-all duration-200 hover:translate-x-2"
        >Store</a
      >
    </li>
    <li>
      <a
        href="/contact"
        class="block py-2 px-3 text-sm hover:bg-gray-200 transition-all duration-200 hover:translate-x-2"
        >Contact</a
      >
    </li>
    <li>
      <a
        href="/about"
        class="block py-2 px-3 text-sm hover:bg-gray-200 transition-all duration-200 hover:translate-x-2"
        >About</a
      >
    </li>
    <li>
      <a
        href="/blog"
        class="block py-2 px-3 text-sm hover:bg-gray-200 transition-all duration-200 hover:translate-x-2"
        >Blog</a
      >
    </li>
  </ul>
</nav>

<script>
  const btn = document.querySelector(".mobile-menu-button");
  const menu = document.querySelector(".mobile-menu");
  const hamburgerIcon = document.querySelector(".hamburger-icon");
  const closeIcon = document.querySelector(".close-icon");

  if (btn && menu && hamburgerIcon && closeIcon) {
    btn.addEventListener("click", () => {
      const isHidden = menu.classList.contains("hidden");

      if (isHidden) {
        // Show menu
        menu.classList.remove("hidden");
        menu.offsetHeight; // Force reflow
        menu.classList.remove("scale-95", "opacity-0");
        menu.classList.add("scale-100", "opacity-100");
      } else {
        // Hide menu
        menu.classList.add("scale-95", "opacity-0");
        menu.classList.remove("scale-100", "opacity-100");
        setTimeout(() => {
          menu.classList.add("hidden");
        }, 500);
      }

      // Toggle icons with animation
      hamburgerIcon.classList.toggle("hidden");
      closeIcon.classList.toggle("hidden");
    });
  }
</script>

<style>
  .image-sharp {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    image-rendering: pixelated;
  }
</style>
